@startuml
!include style.puml
skinparam ArrowFontStyle plain

box Logic LOGIC_COLOR_T1
participant "i:ImportCommand" as ImportCommand LOGIC_COLOR
participant "<<class>>\nCsvUtil" as CsvUtil LOGIC_COLOR
participant "r:CommandResult" as CommandResult LOGIC_COLOR
participant "a:AddCommandParser" as AddCommandParser LOGIC_COLOR
participant "a:AddCommand" as AddCommand LOGIC_COLOR
end box

box Model MODEL_COLOR_T1
participant "p:Person" as Person MODEL_COLOR
participant "m:Model" as Model MODEL_COLOR
end box

 -> ImportCommand : execute(m)
activate ImportCommand

ImportCommand -> CsvUtil : readCsvfile()
activate CsvUtil
CsvUtil --> ImportCommand : personsData
deactivate CsvUtil

loop personData in personsData

ImportCommand -> ImportCommand : convertToAddCommandInput(personData)
activate ImportCommand
ImportCommand --> ImportCommand : addCommandInput
deactivate ImportCommand

ImportCommand -> AddCommandParser : parseAddCommandInput(addCommandInput)
activate AddCommandParser
create AddCommand
AddCommandParser --> AddCommand : parse(addCommandInput)
deactivate AddCommandParser
activate AddCommand
AddCommand --> ImportCommand
deactivate AddCommand

ImportCommand -> AddCommand
activate AddCommand
ref over AddCommand, Person, Model : addCommand.execute(m)
AddCommand --> ImportCommand
deactivate AddCommand

end

destroy AddCommand
destroy AddCommandParser


create CommandResult
ImportCommand -> CommandResult
activate CommandResult

CommandResult --> ImportCommand: CommandResult
deactivate CommandResult

 <--  ImportCommand : CommandResult
deactivate ImportCommand

@enduml
